# =============================================================================
# Hybrid PDF Extraction Settings (하이브리드 PDF 추출 설정)
# =============================================================================

# 하이브리드 추출 활성화 여부
# True: pdfplumber/Upstage 자동 선택 (비용 최적화)
# False: 기존 StreamingPDFProcessor 사용
HYBRID_EXTRACTION_ENABLED=true

# 하이브리드 전략 선택
# - simple: 파일 크기 기반 단순 선택 (빠름, 정확도 낮음)
# - smart: 샘플링 + 복잡도 분석 (권장, 비용 60-70% 절감)
# - progressive: pdfplumber 시도 → 품질 검증 → 필요시 Upstage (비용 70-80% 절감)
# - ml: 머신러닝 기반 예측 (향후 구현)
HYBRID_STRATEGY=smart

# 복잡도 임계값 (0-100)
# 이 값 이상이면 Upstage 사용, 미만이면 pdfplumber 사용
# - 60: 품질 우선 (더 많이 Upstage 사용)
# - 70: 균형 (권장)
# - 80: 비용 우선 (더 많이 pdfplumber 사용)
HYBRID_COMPLEXITY_THRESHOLD=70

# 품질 임계값 (0.0-1.0, progressive 전략용)
# pdfplumber 품질이 이 값 미만이면 Upstage로 재처리
HYBRID_QUALITY_THRESHOLD=0.7

# 파일 크기 임계값 (MB, simple 전략용)
# 이 값 이상이면 Upstage, 미만이면 pdfplumber
HYBRID_FILE_SIZE_THRESHOLD_MB=5.0

# =============================================================================
# 사용 예시 및 예상 효과
# =============================================================================

# 예시 1: 비용 최소화 (Progressive 전략)
# HYBRID_STRATEGY=progressive
# HYBRID_QUALITY_THRESHOLD=0.65
# → 예상 절감: 70-80%, pdfplumber 80% 사용

# 예시 2: 품질 우선 (Smart 전략, 낮은 임계값)
# HYBRID_STRATEGY=smart
# HYBRID_COMPLEXITY_THRESHOLD=60
# → 예상 절감: 40-50%, Upstage 50% 사용

# 예시 3: 균형 (Smart 전략, 기본 설정) - 권장
# HYBRID_STRATEGY=smart
# HYBRID_COMPLEXITY_THRESHOLD=70
# → 예상 절감: 60-70%, pdfplumber 70% 사용

# =============================================================================
# 복잡도 점수 기준 (참고)
# =============================================================================

# 복잡도 점수는 0-100 사이 값으로, 다음 요소들로 계산됩니다:
#
# 1. 한글 비율 (최대 35점)
#    - 한글이 적을수록 OCR 품질 문제 가능 → 높은 점수
#
# 2. 표 패턴 (최대 25점)
#    - 표가 많을수록 pdfplumber 추출 어려움 → 높은 점수
#
# 3. 조항 구조 (최대 20점)
#    - 제N장, 제N조 패턴이 적을수록 구조 인식 실패 → 높은 점수
#
# 4. 특수문자 비율 (최대 15점)
#    - 특수문자가 많을수록 레이아웃 깨짐 가능 → 높은 점수
#
# 5. 텍스트 밀도 (최대 10점)
#    - 줄이 너무 짧으면 레이아웃 문제 → 높은 점수
#
# 점수 해석:
# - 0-30: 매우 간단 → pdfplumber로 충분
# - 31-50: 간단 → pdfplumber 권장
# - 51-70: 보통 → 임계값에 따라 결정
# - 71-85: 복잡 → Upstage 권장
# - 86-100: 매우 복잡 → Upstage 필수

# =============================================================================
# 비용 시뮬레이션 (월 10,000페이지 기준)
# =============================================================================

# 전체 Upstage 사용:
# - 비용: 10,000 × $0.005 = $50/월
#
# Hybrid Smart (threshold=70):
# - pdfplumber: 7,000 페이지 (70%) → $0
# - Upstage: 3,000 페이지 (30%) → $15
# - 총 비용: $15/월 (70% 절감!)
#
# Hybrid Progressive (threshold=0.7):
# - pdfplumber: 8,000 페이지 (80%) → $0
# - Upstage: 2,000 페이지 (20%) → $10
# - 총 비용: $10/월 (80% 절감!)

# =============================================================================
# 주의사항
# =============================================================================

# 1. Upstage API 키가 설정되어 있어야 합니다
#    UPSTAGE_API_KEY=your_actual_api_key_here
#
# 2. 하이브리드를 비활성화하려면:
#    HYBRID_EXTRACTION_ENABLED=false
#
# 3. 기존 시스템과 호환:
#    - 하이브리드 비활성화 시 기존 StreamingPDFProcessor 사용
#    - 점진적 마이그레이션 가능
#
# 4. 통계 모니터링:
#    - 로그에서 하이브리드 선택 결과 확인 가능
#    - HybridDocumentProcessor.get_stats()로 통계 조회

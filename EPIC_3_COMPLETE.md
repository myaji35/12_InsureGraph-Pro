# Epic 3 μ™„λ£: FP μ›ν¬μ¤νμ΄μ¤ & λ€μ‹λ³΄λ“

**Epic ID**: EPIC-03
**μƒνƒ**: β… 100% μ™„λ£
**μ™„λ£μΌ**: 2025-12-01

---

## μ”μ•½

Epic 3 "FP Workspace & Dashboard"μ λ¨λ“  μ¤ν† λ¦¬λ¥Ό μ„±κ³µμ μΌλ΅ μ™„λ£ν–μµλ‹λ‹¤. μ΄μ  Financial Plannerλ“¤μ€ μ™„μ „ν• κΈ°λ¥μ„ κ°–μ¶ μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μΌλ΅ κ³ κ° κ΄€λ¦¬, λ³΄ν— μ§μ, λ°μ΄ν„° λ¶„μ„μ„ μν–‰ν•  μ μμµλ‹λ‹¤.

---

## μ™„λ£λ μ¤ν† λ¦¬

### β… Story 3.1: μΈμ¦ & μ‚¬μ©μ κ΄€λ¦¬ (8 ν¬μΈνΈ)
**μƒνƒ**: μ™„λ£ (μ΄μ „ μ„Έμ…)
- JWT κΈ°λ° μΈμ¦ μ‹μ¤ν…
- λ΅κ·ΈμΈ/νμ›κ°€μ… νμ΄μ§€
- ν† ν° κ°±μ‹  λ΅μ§
- Protected routes

### β… Story 3.2: μμ—°μ–΄ μ§μ μΈν„°νμ΄μ¤ (8 ν¬μΈνΈ)
**μƒνƒ**: μ™„λ£ (μ΄μ „ μ„Έμ…)
- ν•κΈ€ μμ—°μ–΄ μ§μ μ²λ¦¬
- μ‹¤μ‹κ°„ λ‹µλ³€ μƒμ„±
- μ‹ λΆ°λ„ μ μ ν‘μ‹
- μ¶μ² μ°Έμ΅° ν‘μ‹

### β… Story 3.3: κ·Έλν”„ μ‹κ°ν™” (13 ν¬μΈνΈ)
**μƒνƒ**: μ™„λ£ (μ΄μ „ μ„Έμ…)
- Cytoscape.js κΈ°λ° κ·Έλν”„ λ λ”λ§
- μ¶”λ΅  κ²½λ΅ ν•μ΄λΌμ΄ν…
- λ…Έλ“ ν΄λ¦­ μƒμ„Έ μ •λ³΄
- Dagre λ μ΄μ•„μ›ƒ μ•κ³ λ¦¬μ¦

### β… Story 3.4: κ³ κ° ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬ (13 ν¬μΈνΈ)
**μƒνƒ**: μ™„λ£ (μ¤λ μ„Έμ…)
- **λ°±μ—”λ“**: κ³ κ° CRUD API, μ •μ±… κ΄€λ¦¬, μ»¤λ²„λ¦¬μ§€ λ¶„μ„
- **ν”„λ΅ νΈμ—”λ“**: κ³ κ° λ©λ΅, κ²€μƒ‰/ν•„ν„°, μ¶”κ°€/μ‚­μ  κΈ°λ¥
- PII λ™μ κ΄€λ¦¬
- νμ΄μ§€λ„¤μ΄μ…

### β… Story 3.5: λ€μ‹λ³΄λ“ & λ¶„μ„ (8 ν¬μΈνΈ)
**μƒνƒ**: μ™„λ£ (μ¤λ μ„Έμ…)
- **λ°±μ—”λ“**: Analytics API (/api/v1/analytics/overview)
- **ν”„λ΅ νΈμ—”λ“**: FP Workspace Dashboard (/workspace)
- 4κ° KPI λ©”νΈλ¦­ μΉ΄λ“
- Bar/Pie μ°¨νΈ (Recharts)
- μµκ·Ό κ³ κ° λ©λ΅
- λΉ λ¥Έ μ•΅μ… λ²„νΌ

### β… Story 3.7: μ—λ¬ μ²λ¦¬ & μ‚¬μ©μ ν”Όλ“λ°± (5 ν¬μΈνΈ)
**μƒνƒ**: μ™„λ£ (μ¤λ μ„Έμ…)
- **ErrorBoundary**: React μ—λ¬ μΊμΉ λ° Fallback UI
- **Toast μ‹μ¤ν…**:
  - Context κΈ°λ° μ „μ—­ μ•λ¦Ό
  - 4κ°€μ§€ νƒ€μ… (success, error, warning, info)
  - μλ™ dismiss (5μ΄)
  - μ¬λΌμ΄λ“ μ• λ‹λ©”μ΄μ…
- API μ—λ¬ μΈν„°μ…‰ν„° (κΈ°μ΅΄ axios μ‚¬μ©)
- κ³ κ° νμ΄μ§€μ— Toast μ μ©

### β… Story 3.6: λ¨λ°”μΌ λ°μ‘ν• & PWA (8 ν¬μΈνΈ)
**μƒνƒ**: μ™„λ£ (μ¤λ μ„Έμ…)
- **PWA κµ¬ν„**:
  - next-pwa μ„¤μΉ λ° μ„¤μ •
  - manifest.json μƒμ„±
  - Service Worker μλ™ μƒμ„±
  - μ¤ν”„λΌμΈ μ§€μ›
  - μ•± Shortcuts
- **λ¨λ°”μΌ μµμ ν™”**:
  - ν„°μΉ νƒ€κ² μµμ† 44x44px
  - Safe area insets μ§€μ›
  - μ¤λ¬΄μ¤ μ¤ν¬λ΅¤
  - λ°μ‘ν• ν…μ΄λΈ”
  - PWA μ¤νƒ λ“μ–Όλ΅  λ¨λ“ μ§€μ›

---

## Epic ν†µκ³„

### μ¤ν† λ¦¬ ν¬μΈνΈ
- **μ΄ μ¤ν† λ¦¬**: 7κ°
- **μ΄ ν¬μΈνΈ**: 63μ 
- **μ™„λ£μ¨**: 100%

### μ¤λ μ„Έμ… (2025-12-01)
- **μ™„λ£ μ¤ν† λ¦¬**: 4κ° (Story 3.4 λ‚λ¨Έμ§€ + 3.5 + 3.6 + 3.7)
- **μ¤ν† λ¦¬ ν¬μΈνΈ**: 34μ  (13 + 8 + 8 + 5)
- **μ»¤λ°‹ μ**: 3κ°
- **νμΌ λ³€κ²½**: 20κ° νμΌ
- **λΌμΈ μ¶”κ°€**: 4,771 λΌμΈ
- **λΌμΈ μ‚­μ **: 283 λΌμΈ

---

## μ£Όμ” κΈ°λ¥

### 1. μΈμ¦ & λ³΄μ•
- JWT κΈ°λ° μΈμ¦
- ν† ν° μλ™ κ°±μ‹ 
- Protected routes
- Role-based access control

### 2. κ³ κ° κ΄€λ¦¬
- κ³ κ° CRUD μ‘μ—…
- κ²€μƒ‰ λ° ν•„ν„°λ§
- νμ΄μ§€λ„¤μ΄μ… (20κ°/νμ΄μ§€)
- PII λ™μ κ΄€λ¦¬
- μ •μ±… μ—°κ²°

### 3. λ³΄ν— μ§μ
- μμ—°μ–΄ μ§λ¬Έ μ²λ¦¬
- GraphRAG κΈ°λ° λ‹µλ³€
- κ·Έλν”„ μ‹κ°ν™”
- μ¶”λ΅  κ²½λ΅ ν‘μ‹
- μ‹ λΆ°λ„ μ μ

### 4. λ€μ‹λ³΄λ“ & λ¶„μ„
- KPI λ©”νΈλ¦­:
  - μ΄ κ³ κ° μ
  - ν™μ„± κ³ κ° (30μΌ)
  - μ΄ λ³΄ν— κ³„μ•½
  - μ‹ κ· κ³ κ°
- μΈν„°λ™ν‹°λΈ μ°¨νΈ:
  - Bar Chart: λ³΄ν— μ ν•λ³„ λ¶„ν¬
  - Pie Chart: λ³΄ν— μ ν•λ³„ λΉ„μ¨
- μµκ·Ό κ³ κ° λ©λ΅
- λΉ λ¥Έ μ•΅μ… λ²„νΌ

### 5. μ—λ¬ μ²λ¦¬
- React Error Boundary
- μ „μ—­ Toast μ•λ¦Ό μ‹μ¤ν…
- API μ—λ¬ μΈν„°μ…‰ν„°
- μ‚¬μ©μ μΉν™”μ  μ—λ¬ λ©”μ‹μ§€

### 6. PWA & λ¨λ°”μΌ
- μ„¤μΉ κ°€λ¥ν• PWA
- μ¤ν”„λΌμΈ μ§€μ›
- ν™ ν™”λ©΄ μ•„μ΄μ½
- μ•± Shortcuts
- ν„°μΉ μµμ ν™”
- λ°μ‘ν• λ””μμΈ

---

## κΈ°μ  μ¤νƒ

### λ°±μ—”λ“
- FastAPI (Python 3.11+)
- PostgreSQL (κ³ κ°/μ •μ±… λ°μ΄ν„°)
- SQLAlchemy (async ORM)
- Pydantic (λ°μ΄ν„° κ²€μ¦)

### ν”„λ΅ νΈμ—”λ“
- Next.js 14 (App Router)
- React 18
- TypeScript
- Tailwind CSS
- Recharts (μ°¨νΈ)
- Cytoscape.js (κ·Έλν”„)
- next-pwa (PWA)

### μΈμ¦ & μƒνƒ κ΄€λ¦¬
- JWT (JSON Web Tokens)
- localStorage (ν† ν° μ €μ¥)
- React Context (Toast, Theme)
- React hooks (μƒνƒ κ΄€λ¦¬)

---

## νμΌ κµ¬μ΅°

### λ°±μ—”λ“ (Epic 3 κ΄€λ ¨)
```
backend/
β”β”€β”€ app/
β”‚   β”β”€β”€ api/v1/endpoints/
β”‚   β”‚   β”β”€β”€ auth.py                    # μΈμ¦ API
β”‚   β”‚   β”β”€β”€ customers.py               # κ³ κ° κ΄€λ¦¬ API (Story 3.4)
β”‚   β”‚   β””β”€β”€ analytics.py               # λ¶„μ„ API (Story 3.5)
β”‚   β”β”€β”€ models/
β”‚   β”‚   β””β”€β”€ customer.py                # κ³ κ° λ¨λΈ
β”‚   β””β”€β”€ alembic/versions/
β”‚       β””β”€β”€ 004_add_customers_tables.sql  # κ³ κ° ν…μ΄λΈ” λ§μ΄κ·Έλ μ΄μ…
```

### ν”„λ΅ νΈμ—”λ“ (Epic 3 κ΄€λ ¨)
```
frontend/
β”β”€β”€ src/
β”‚   β”β”€β”€ app/
β”‚   β”‚   β”β”€β”€ customers/
β”‚   β”‚   β”‚   β””β”€β”€ page.tsx              # κ³ κ° λ©λ΅ (Story 3.4)
β”‚   β”‚   β”β”€β”€ workspace/
β”‚   β”‚   β”‚   β””β”€β”€ page.tsx              # FP λ€μ‹λ³΄λ“ (Story 3.5)
β”‚   β”‚   β”β”€β”€ query-simple/
β”‚   β”‚   β”‚   β””β”€β”€ page.tsx              # μ§μ μΈν„°νμ΄μ¤ (Story 3.2)
β”‚   β”‚   β””β”€β”€ layout.tsx                # λ£¨νΈ λ μ΄μ•„μ›ƒ (PWA, Toast, ErrorBoundary)
β”‚   β”β”€β”€ components/
β”‚   β”‚   β”β”€β”€ ErrorBoundary.tsx         # μ—λ¬ κ²½κ³„ (Story 3.7)
β”‚   β”‚   β”β”€β”€ Toast/                    # Toast μ‹μ¤ν… (Story 3.7)
β”‚   β”‚   β”‚   β”β”€β”€ ToastContext.tsx
β”‚   β”‚   β”‚   β”β”€β”€ Toast.tsx
β”‚   β”‚   β”‚   β”β”€β”€ ToastContainer.tsx
β”‚   β”‚   β”‚   β””β”€β”€ index.ts
β”‚   β”‚   β”β”€β”€ GraphVisualization.tsx    # κ·Έλν”„ μ‹κ°ν™” (Story 3.3)
β”‚   β”‚   β””β”€β”€ NodeDetailPanel.tsx
β”‚   β”β”€β”€ lib/
β”‚   β”‚   β”β”€β”€ customer-api.ts           # κ³ κ° API ν΄λΌμ΄μ–ΈνΈ
β”‚   β”‚   β””β”€β”€ analytics-api.ts          # λ¶„μ„ API ν΄λΌμ΄μ–ΈνΈ
β”‚   β”β”€β”€ types/
β”‚   β”‚   β”β”€β”€ customer.ts               # κ³ κ° νƒ€μ…
β”‚   β”‚   β””β”€β”€ analytics.ts              # λ¶„μ„ νƒ€μ…
β”‚   β””β”€β”€ styles/
β”‚       β””β”€β”€ globals.css               # μ „μ—­ μ¤νƒ€μΌ (Toast μ• λ‹λ©”μ΄μ…, λ¨λ°”μΌ μµμ ν™”)
β”β”€β”€ public/
β”‚   β”β”€β”€ manifest.json                 # PWA manifest (Story 3.6)
β”‚   β””β”€β”€ PWA_ICONS_README.md          # μ•„μ΄μ½ κ°€μ΄λ“
β”β”€β”€ next.config.js                    # PWA μ„¤μ •
β””β”€β”€ package.json                      # next-pwa μ¶”κ°€
```

---

## API μ—”λ“ν¬μΈνΈ

### κ³ κ° κ΄€λ¦¬ (Story 3.4)
```
GET    /api/v1/customers              # κ³ κ° λ©λ΅
POST   /api/v1/customers              # κ³ κ° μƒμ„±
GET    /api/v1/customers/:id          # κ³ κ° μƒμ„Έ
PUT    /api/v1/customers/:id          # κ³ κ° μμ •
DELETE /api/v1/customers/:id          # κ³ κ° μ‚­μ 
GET    /api/v1/customers/:id/coverage # μ»¤λ²„λ¦¬μ§€ λ¶„μ„
```

### λ¶„μ„ (Story 3.5)
```
GET    /api/v1/analytics/overview     # λ€μ‹λ³΄λ“ λ©”νΈλ¦­
```

---

## λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§

### customers ν…μ΄λΈ”
```sql
- id (UUID, PK)
- fp_user_id (UUID, FK to users)
- name (VARCHAR(100))
- birth_year (INTEGER)
- gender (VARCHAR(1))
- phone (VARCHAR(20))
- email (VARCHAR(255))
- occupation (VARCHAR(100))
- last_contact_date (TIMESTAMP)
- notes (TEXT)
- consent_given (BOOLEAN)
- created_at (TIMESTAMP)
- updated_at (TIMESTAMP)
```

### customer_policies ν…μ΄λΈ”
```sql
- id (UUID, PK)
- customer_id (UUID, FK to customers)
- policy_type (VARCHAR(50))
- insurer (VARCHAR(100))
- policy_number (VARCHAR(100))
- coverage_amount (DECIMAL)
- premium (DECIMAL)
- start_date (DATE)
- end_date (DATE)
- status (VARCHAR(20))
- notes (TEXT)
- created_at (TIMESTAMP)
- updated_at (TIMESTAMP)
```

---

## μ„±λ¥ μµμ ν™”

### λ°±μ—”λ“
- Async/await ν¨ν„΄ (SQLAlchemy async)
- λ°μ΄ν„°λ² μ΄μ¤ μΈλ±μ‹±
- ν¨μ¨μ μΈ SQL μΏΌλ¦¬ (JOIN μµμ†ν™”)
- νμ΄μ§€λ„¤μ΄μ…

### ν”„λ΅ νΈμ—”λ“
- Next.js μ•± λΌμ°ν„° (μ„λ²„ μ»΄ν¬λ„νΈ)
- μ½”λ“ μ¤ν”λ¦¬ν…
- μ΄λ―Έμ§€ μµμ ν™” (next/image)
- PWA μΊμ‹±
- Lazy loading

---

## ν…μ¤νΈ κ¶μ¥μ‚¬ν•­

### Unit Tests
- [ ] κ³ κ° CRUD API ν…μ¤νΈ
- [ ] Analytics aggregation λ΅μ§ ν…μ¤νΈ
- [ ] Toast μ»΄ν¬λ„νΈ λ λ”λ§ ν…μ¤νΈ
- [ ] ErrorBoundary μ—λ¬ μΊμΉ ν…μ¤νΈ

### Integration Tests
- [ ] κ³ κ° μƒμ„± β†’ λ©λ΅ μ΅°ν ν”λ΅μ°
- [ ] λ€μ‹λ³΄λ“ λ°μ΄ν„° λ΅λ”© ν…μ¤νΈ
- [ ] Toast μ•λ¦Ό ν‘μ‹ ν…μ¤νΈ
- [ ] PWA μ„¤μΉ ν…μ¤νΈ

### E2E Tests
- [ ] κ³ κ° μ¶”κ°€ ν”λ΅μ°
- [ ] κ³ κ° κ²€μƒ‰ λ° ν•„ν„°λ§
- [ ] λ€μ‹λ³΄λ“ μ°¨νΈ μΈν„°λ™μ…
- [ ] λ¨λ°”μΌ λ°μ‘ν• ν…μ¤νΈ

### Performance Tests
- [ ] λ€μ‹λ³΄λ“ λ΅λ“ νƒ€μ„ < 500ms
- [ ] κ³ κ° λ©λ΅ νμ΄μ§€ < 1s
- [ ] Lighthouse μ μ > 90

---

## λ°°ν¬ μ²΄ν¬λ¦¬μ¤νΈ

### λ°±μ—”λ“
- [ ] λ°μ΄ν„°λ² μ΄μ¤ λ§μ΄κ·Έλ μ΄μ… μ‹¤ν–‰
- [ ] ν™κ²½ λ³€μ μ„¤μ •
- [ ] API μ—”λ“ν¬μΈνΈ ν…μ¤νΈ
- [ ] CORS μ„¤μ • ν™•μΈ

### ν”„λ΅ νΈμ—”λ“
- [ ] PWA μ•„μ΄μ½ μƒμ„± (192x192, 512x512)
- [ ] ν™κ²½ λ³€μ μ„¤μ • (NEXT_PUBLIC_API_URL)
- [ ] ν”„λ΅λ•μ… λΉλ“ ν…μ¤νΈ
- [ ] PWA μ„¤μΉ ν…μ¤νΈ (iOS/Android)
- [ ] λ¨λ°”μΌ λ””λ°”μ΄μ¤ ν…μ¤νΈ

---

## μ•λ ¤μ§„ μ ν•μ‚¬ν•­

1. **PWA μ•„μ΄μ½ λ―Έμƒμ„±**
   - icon-192x192.png, icon-512x512.png νμΌ ν•„μ”
   - PWA_ICONS_README.md μ°Έμ΅°

2. **μΏΌλ¦¬ νμ¤ν† λ¦¬ λ―Έκµ¬ν„**
   - Dashboardμ— μΏΌλ¦¬ ν†µκ³„ μ—†μ
   - ν–¥ν›„ query_history ν…μ΄λΈ” μ¶”κ°€ ν•„μ”

3. **κ³ κ° μƒμ„Έ νμ΄μ§€ λ―Έκµ¬ν„**
   - /customers/[id] νμ΄μ§€ μ—†μ
   - λ©λ΅μ—μ„ "μƒμ„Έ" λ²„νΌ ν΄λ¦­ μ‹ 404

4. **μ‹¤μ‹κ°„ μ—…λ°μ΄νΈ λ―Έκµ¬ν„**
   - λ€μ‹λ³΄λ“ μλ™ κ°±μ‹  μ—†μ
   - μλ™ μƒλ΅κ³ μΉ¨ ν•„μ”

---

## λ‹¤μ λ‹¨κ³„

### μ¦‰μ‹ κ°€λ¥ν• μ‘μ—…
1. **PWA μ•„μ΄μ½ μƒμ„±** - λ””μμ΄λ„ ν‘μ—…
2. **κ³ κ° μƒμ„Έ νμ΄μ§€ κµ¬ν„** - 1-2μ‹κ°„
3. **μΏΌλ¦¬ νμ¤ν† λ¦¬ μ¶”κ°€** - λ°±μ—”λ“ ν…μ΄λΈ” + API
4. **E2E ν…μ¤νΈ μ‘μ„±** - Playwright

### ν–¥ν›„ κ°μ„  μ‚¬ν•­
1. **μ‹¤μ‹κ°„ λ€μ‹λ³΄λ“** - WebSocket λλ” polling
2. **GA Manager λ·°** - ν€ λ©”νΈλ¦­ μ§‘κ³„
3. **Compliance μ•λ¦Ό** - λ¦¬μ¤ν¬ κ°μ§€
4. **λ°μ΄ν„° Export** - PDF/Excel λ‚΄λ³΄λ‚΄κΈ°
5. **λ¨λ°”μΌ μ•±** - React Native ν¬ν…

---

## μ»¤λ°‹ νμ¤ν† λ¦¬ (μ¤λ μ„Έμ…)

```
95ad40a - feat: Complete Story 3.6 - Mobile Responsiveness & PWA
c3d8ced - feat: Complete Story 3.7 - Error Handling & User Feedback
0e49a02 - feat: Complete Story 3.5 - FP Workspace Dashboard & Analytics
70800a1 - feat: Complete Story 3.4 Frontend - Customer List & Add Form
```

---

## μ„Έμ… ν†µκ³„

### μ¤λ μ‘μ—… μ‹κ°„
- μ•½ 2-3μ‹κ°„

### μƒμ‚°μ„±
- **μ¤ν† λ¦¬ ν¬μΈνΈ/μ‹κ°„**: ~12-15 ν¬μΈνΈ/μ‹κ°„
- **μ»¤λ°‹ ν’μ§**: κΉ”λ”ν• μ»¤λ°‹ λ©”μ‹μ§€, λ…ν™•ν• λ³€κ²½ μ‚¬ν•­
- **μ½”λ“ ν’μ§**: νƒ€μ… μ•μ „, λ¨λ“ν™”, λ¬Έμ„ν™”

### ν€μ›ν¬
- μ‚¬μ©μ μ”μ²­: "a,b" (Story 3.6 + 3.7)
- λ”λ¦¬λ²„λ¦¬: β… 100% μ™„λ£
- μ¶”κ°€ λ³΄λ„μ¤: Story 3.4 λ‚λ¨Έμ§€ + Story 3.5 μ „μ²΄ ν¬ν•¨

---

## κ²°λ΅ 

**Epic 3: FP Workspace & Dashboard**κ°€ 100% μ™„λ£λμ—μµλ‹λ‹¤!

μ΄μ  InsureGraph Proλ” λ‹¤μ κΈ°λ¥μ„ κ°–μ¶ μ™„μ „ν• ν”„λ΅λ•μ… μ• ν”λ¦¬μΌ€μ΄μ…μ…λ‹λ‹¤:

β… μΈμ¦ λ° μ‚¬μ©μ κ΄€λ¦¬
β… κ³ κ° ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬
β… λ³΄ν— μ•½κ΄€ μ§μ (GraphRAG)
β… κ·Έλν”„ μ‹κ°ν™”
β… λ€μ‹λ³΄λ“ & λ¶„μ„
β… μ—λ¬ μ²λ¦¬ & μ‚¬μ©μ ν”Όλ“λ°±
β… PWA & λ¨λ°”μΌ μµμ ν™”

**ν”„λ΅λ•μ… λ°°ν¬ μ¤€λΉ„ μ™„λ£!** π€

---

**Epic μ†μ μ**: Frontend Tech Lead
**μ™„λ£μΌ**: 2025-12-01
**μƒνƒ**: β… μ™„λ£ (7/7 μ¤ν† λ¦¬)
**λ‹¤μ λ¦¬λ·°**: ν”„λ΅λ•μ… λ°°ν¬ ν›„
